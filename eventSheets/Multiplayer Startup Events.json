{
	"name": "Multiplayer Startup Events",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 584505116233423,
					"parameters": {
						"key": 77
					}
				}
			],
			"actions": [
				{
					"id": "signal",
					"objectClass": "System",
					"sid": 298916970840613,
					"parameters": {
						"tag": "\"start-multiplayer\""
					}
				},
				{
					"callFunction": "AddDebugMessage",
					"sid": 492432644458948,
					"parameters": [
						"\"Starting multiplayer mode\""
					]
				},
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 431283431436404,
					"parameters": {
						"group-name": "\"Simulation Host\"",
						"state": "deactivated"
					}
				}
			],
			"sid": 809130123891448,
			"isOrBlock": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-signal",
					"objectClass": "System",
					"sid": 245392497243203,
					"parameters": {
						"tag": "\"start-multiplayer\""
					}
				}
			],
			"actions": [
				{
					"id": "connect",
					"objectClass": "Multiplayer",
					"sid": 224958438047921,
					"parameters": {
						"server": "\"wss://multiplayer.scirra.com\""
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 688058552943830,
					"parameters": {
						"object": "PlayerShip",
						"data": "position-and-angle",
						"precision": "low-int16-2-bytes",
						"bandwidth": "normal-bandwidth-unpredictable"
					}
				},
				{
					"id": "add-client-input-value",
					"objectClass": "Multiplayer",
					"sid": 358983191729607,
					"parameters": {
						"tag": "\"inputBits\"",
						"precision": "very-low-uint8-1-byte",
						"interpolation": "none"
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 474835874655033,
					"parameters": {
						"object": "PlayerStandardBullet",
						"data": "position-and-angle",
						"precision": "low-int16-2-bytes",
						"bandwidth": "low-bandwidth-highly-predictable"
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 570410753931298,
					"parameters": {
						"object": "EnemyShip",
						"data": "position-and-angle",
						"precision": "low-int16-2-bytes",
						"bandwidth": "normal-bandwidth-unpredictable"
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 822585054528410,
					"parameters": {
						"object": "EnemyStandardBullet",
						"data": "position-and-angle",
						"precision": "low-int16-2-bytes",
						"bandwidth": "low-bandwidth-highly-predictable"
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 873743470043794,
					"disabled": true,
					"parameters": {
						"object": "ExplosionParticle",
						"data": "position-and-angle",
						"precision": "normal-float-4-bytes",
						"bandwidth": "normal-bandwidth-unpredictable"
					}
				}
			],
			"sid": 619567260060338
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-connected",
					"objectClass": "Multiplayer",
					"sid": 455107176419847
				}
			],
			"actions": [
				{
					"id": "log-in",
					"objectClass": "Multiplayer",
					"sid": 259376720992953,
					"parameters": {
						"alias": "\"PLAYER\""
					}
				}
			],
			"sid": 767276462524038
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-logged-in",
					"objectClass": "Multiplayer",
					"sid": 740486288096634
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 252634385038348,
					"parameters": [
						"\"Logged in to signaling server.\""
					]
				},
				{
					"callFunction": "AddDebugMessage",
					"sid": 440781718038499,
					"parameters": [
						"\"Peer ID: \" & Multiplayer.MyID"
					]
				},
				{
					"callFunction": "AddDebugMessage",
					"sid": 801295598621551,
					"parameters": [
						"\"Alias: \" & Multiplayer.MyAlias"
					]
				},
				{
					"id": "auto-join-room",
					"objectClass": "Multiplayer",
					"sid": 552877280955417,
					"parameters": {
						"game": "\"zekoff-1gam2023-july\"",
						"instance": "\"default\"",
						"first-room": "\"initial-room\"",
						"max-peers": "2",
						"locking": "lock-when-full"
					}
				}
			],
			"sid": 276571834768718
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-error",
					"objectClass": "Multiplayer",
					"sid": 921286554662217
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 978666307050806,
					"parameters": [
						"\"[b]Multiplayer error: \" & Multiplayer.ErrorMessage & \"[/b]\""
					]
				}
			],
			"sid": 103727385601494
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-disconnected",
					"objectClass": "Multiplayer",
					"sid": 172017275285829
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 687447654986570,
					"parameters": [
						"\"[b]Disconnected[/b]\""
					]
				}
			],
			"sid": 404229586832409
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-left-room",
					"objectClass": "Multiplayer",
					"sid": 223132968826719
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 488000808380005,
					"parameters": [
						"\"Left room\""
					]
				}
			],
			"sid": 706918579885965
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-kicked",
					"objectClass": "Multiplayer",
					"sid": 741802094062323
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 575469057447905,
					"parameters": [
						"\"Kicked\""
					]
				}
			],
			"sid": 796513361704076
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-host-disconnected",
					"objectClass": "Multiplayer",
					"sid": 724390698146356
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 683699924039046,
					"parameters": [
						"\"Host disconnected\""
					]
				}
			],
			"sid": 847165060067561
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-peer-disconnected",
					"objectClass": "Multiplayer",
					"sid": 712391996207021
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 145701752092832,
					"parameters": [
						"\"Peer disconnected\""
					]
				}
			],
			"sid": 486348081193610
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 587206629419060,
					"parameters": {
						"interval-seconds": "3"
					}
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 255069713165888,
					"parameters": [
						"\"Inbound bandwidth: \" & Multiplayer.StatInboundBandwidth & newline &\n\"Outbound bandwidth: \" & Multiplayer.StatOutboundBandwidth & newline &\n\"Ping: \" & round(Multiplayer.PeerLatency(Multiplayer.HostID)) & newline &\n\"Inbound count: \" & Multiplayer.StatInboundCount & newline &\n\"Outboud count: \" & Multiplayer.StatOutboundCount"
					]
				}
			],
			"sid": 718092473211758
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-joined-room",
					"objectClass": "Multiplayer",
					"sid": 383555700516392
				}
			],
			"actions": [],
			"sid": 312920258909566,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-host",
							"objectClass": "Multiplayer",
							"sid": 738187786450483
						}
					],
					"actions": [
						{
							"callFunction": "AddDebugMessage",
							"sid": 392119993357074,
							"parameters": [
								"\"Joined as host\""
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerShip",
							"sid": 989387960668178,
							"parameters": {
								"instance-variable": "peerId",
								"value": "Multiplayer.MyID"
							}
						},
						{
							"id": "associate-object-with-peer",
							"objectClass": "Multiplayer",
							"sid": 672004540419165,
							"parameters": {
								"object": "PlayerShip",
								"peer-id": "Multiplayer.MyID"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 899785372860562,
							"parameters": {
								"group-name": "\"Simulation Host\"",
								"state": "activated"
							}
						}
					],
					"sid": 974490199840915
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 177786266257387
						}
					],
					"actions": [
						{
							"callFunction": "AddDebugMessage",
							"sid": 624830328688483,
							"parameters": [
								"\"Joined as peer\""
							]
						},
						{
							"id": "destroy",
							"objectClass": "PlayerShip",
							"sid": 274178345732748
						},
						{
							"id": "destroy",
							"objectClass": "EnemyShip",
							"sid": 552511890155616
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 732577994832028,
							"parameters": {
								"group-name": "\"Peer\"",
								"state": "activated"
							}
						}
					],
					"sid": 803742517823264
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-peer-connected",
					"objectClass": "Multiplayer",
					"sid": 232884675609816
				},
				{
					"id": "is-host",
					"objectClass": "Multiplayer",
					"sid": 730572179120958
				}
			],
			"actions": [
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 292012660794229,
					"parameters": {
						"object-to-create": "PlayerShip",
						"layer": "0",
						"x": "500",
						"y": "500",
						"create-hierarchy": false,
						"template-name": "\"Falcon\""
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "PlayerShip",
					"sid": 186367793058797,
					"parameters": {
						"instance-variable": "peerId",
						"value": "Multiplayer.PeerID"
					}
				},
				{
					"id": "associate-object-with-peer",
					"objectClass": "Multiplayer",
					"sid": 533995879567141,
					"parameters": {
						"object": "PlayerShip",
						"peer-id": "Multiplayer.PeerID"
					}
				}
			],
			"sid": 786283168229150
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Peer",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "PlayerShip",
							"sid": 632798856058433
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerShip",
							"sid": 319703099102144,
							"parameters": {
								"instance-variable": "peerId",
								"value": "Multiplayer.PeerID"
							}
						},
						{
							"id": "associate-object-with-peer",
							"objectClass": "Multiplayer",
							"sid": 586282567761711,
							"parameters": {
								"object": "PlayerShip",
								"peer-id": "Multiplayer.PeerID"
							}
						},
						{
							"callFunction": "AddDebugMessage",
							"sid": 237440796360443,
							"parameters": [
								"\"Peer ship Peer ID value: \" & PlayerShip.peerId"
							]
						},
						{
							"callFunction": "AddDebugMessage",
							"sid": 629271501018132,
							"parameters": [
								"\"Peer ship UID: \" & PlayerShip.UID"
							]
						}
					],
					"sid": 729577001870489,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayerShip",
									"sid": 950630280990814,
									"parameters": {
										"instance-variable": "peerId",
										"comparison": 0,
										"value": "Multiplayer.MyID"
									}
								}
							],
							"actions": [
								{
									"callFunction": "AddDebugMessage",
									"sid": 906204625159449,
									"parameters": [
										"\"Enabling local input prediction\""
									]
								},
								{
									"id": "enable-local-input-prediction",
									"objectClass": "Multiplayer",
									"sid": 779043029357900,
									"parameters": {
										"object": "PlayerShip"
									}
								}
							],
							"sid": 759157878929346
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-client-update",
							"objectClass": "Multiplayer",
							"sid": 890693767087770
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PlayerShip",
							"sid": 101731115784932,
							"parameters": {
								"instance-variable": "peerId",
								"comparison": 0,
								"value": "Multiplayer.MyID"
							}
						}
					],
					"actions": [
						{
							"id": "set-client-state",
							"objectClass": "Multiplayer",
							"sid": 192401672527586,
							"parameters": {
								"tag": "\"inputBits\"",
								"value": "PlayerShip.inputBits"
							}
						},
						{
							"callFunction": "AddDebugMessage",
							"sid": 885859124344557,
							"disabled": true,
							"parameters": [
								"\"Peer inputs: \" & PlayerShip.inputBits"
							]
						}
					],
					"sid": 833777305179666
				}
			],
			"sid": 314405887567385
		}
	],
	"sid": 526462627559355
}