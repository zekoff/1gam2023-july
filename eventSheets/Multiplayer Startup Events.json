{
	"name": "Multiplayer Startup Events",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 584505116233423,
					"parameters": {
						"key": 77
					}
				},
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 328883367218715,
					"parameters": {
						"object": "PlayerController"
					}
				}
			],
			"actions": [
				{
					"id": "signal",
					"objectClass": "System",
					"sid": 298916970840613,
					"parameters": {
						"tag": "\"start-multiplayer\""
					}
				},
				{
					"callFunction": "AddDebugMessage",
					"sid": 492432644458948,
					"parameters": [
						"\"Starting multiplayer mode\""
					]
				}
			],
			"sid": 809130123891448,
			"isOrBlock": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-signal",
					"objectClass": "System",
					"sid": 245392497243203,
					"parameters": {
						"tag": "\"start-multiplayer\""
					}
				}
			],
			"actions": [
				{
					"id": "connect",
					"objectClass": "Multiplayer",
					"sid": 224958438047921,
					"parameters": {
						"server": "\"wss://multiplayer.scirra.com\""
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 439159902834740,
					"parameters": {
						"object": "PlayerController",
						"data": "position-only",
						"precision": "normal-float-4-bytes",
						"bandwidth": "normal-bandwidth-unpredictable"
					}
				},
				{
					"id": "sync-instance-variable",
					"objectClass": "Multiplayer",
					"sid": 350452905512164,
					"parameters": {
						"object": "PlayerController",
						"instance-variable": {
							"name": "uidControlledShip",
							"objectClass": "PlayerController"
						},
						"precision": "normal-float-4-bytes",
						"interpolation": "none",
						"client-value-tag": "\"\""
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 639336095760782,
					"parameters": {
						"object": "PlayerShip",
						"data": "position-and-angle",
						"precision": "normal-float-4-bytes",
						"bandwidth": "normal-bandwidth-unpredictable"
					}
				},
				{
					"id": "add-client-input-value",
					"objectClass": "Multiplayer",
					"sid": 358983191729607,
					"parameters": {
						"tag": "\"inputBits\"",
						"precision": "very-low-uint8-1-byte",
						"interpolation": "none"
					}
				},
				{
					"id": "sync-object",
					"objectClass": "Multiplayer",
					"sid": 787154217341796,
					"parameters": {
						"object": "PlayerStandardBullet",
						"data": "position-and-angle",
						"precision": "normal-float-4-bytes",
						"bandwidth": "normal-bandwidth-unpredictable"
					}
				}
			],
			"sid": 619567260060338,
			"children": [
				{
					"eventType": "comment",
					"text": "TODO: shouldn't be needed if not on config layout."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "PlayerShip",
							"sid": 119245419268685,
							"parameters": {
								"unique-id": "PlayerController.uidControlledShip"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "PlayerShip",
							"sid": 615820099285218
						}
					],
					"sid": 693412426805590
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-connected",
					"objectClass": "Multiplayer",
					"sid": 455107176419847
				}
			],
			"actions": [
				{
					"id": "log-in",
					"objectClass": "Multiplayer",
					"sid": 259376720992953,
					"parameters": {
						"alias": "\"PLAYER\""
					}
				}
			],
			"sid": 767276462524038
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-logged-in",
					"objectClass": "Multiplayer",
					"sid": 740486288096634
				}
			],
			"actions": [
				{
					"callFunction": "AddDebugMessage",
					"sid": 252634385038348,
					"parameters": [
						"\"Logged in to signaling server.\""
					]
				},
				{
					"callFunction": "AddDebugMessage",
					"sid": 440781718038499,
					"parameters": [
						"\"Peer ID: \" & Multiplayer.MyID"
					]
				},
				{
					"callFunction": "AddDebugMessage",
					"sid": 801295598621551,
					"parameters": [
						"\"Alias: \" & Multiplayer.MyAlias"
					]
				},
				{
					"id": "auto-join-room",
					"objectClass": "Multiplayer",
					"sid": 552877280955417,
					"parameters": {
						"game": "\"zekoff-1gam2023-july\"",
						"instance": "\"default\"",
						"first-room": "\"initial-room\"",
						"max-peers": "2",
						"locking": "lock-when-full"
					}
				}
			],
			"sid": 276571834768718
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-joined-room",
					"objectClass": "Multiplayer",
					"sid": 383555700516392
				}
			],
			"actions": [],
			"sid": 312920258909566,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-host",
							"objectClass": "Multiplayer",
							"sid": 738187786450483
						}
					],
					"actions": [
						{
							"callFunction": "AddDebugMessage",
							"sid": 392119993357074,
							"parameters": [
								"\"Joined as host\""
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerController",
							"sid": 361776168354470,
							"parameters": {
								"instance-variable": "peerId",
								"value": "Multiplayer.MyID"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 962719732322177,
							"parameters": {
								"group-name": "\"Host\"",
								"state": "activated"
							}
						}
					],
					"sid": 974490199840915
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 177786266257387
						}
					],
					"actions": [
						{
							"callFunction": "AddDebugMessage",
							"sid": 624830328688483,
							"parameters": [
								"\"Joined as peer\""
							]
						},
						{
							"id": "destroy",
							"objectClass": "PlayerController",
							"sid": 661726866720969
						},
						{
							"id": "destroy",
							"objectClass": "PlayerShip",
							"sid": 274178345732748
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 732577994832028,
							"parameters": {
								"group-name": "\"Peer\"",
								"state": "activated"
							}
						}
					],
					"sid": 803742517823264
				}
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Peer",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "PlayerController",
							"sid": 347237110926449
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerController",
							"sid": 513810687739596,
							"parameters": {
								"instance-variable": "peerId",
								"value": "Multiplayer.PeerID"
							}
						}
					],
					"sid": 273589431230060
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-client-update",
							"objectClass": "Multiplayer",
							"sid": 890693767087770
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PlayerController",
							"sid": 101731115784932,
							"parameters": {
								"instance-variable": "peerId",
								"comparison": 0,
								"value": "Multiplayer.MyID"
							}
						}
					],
					"actions": [
						{
							"id": "set-client-state",
							"objectClass": "Multiplayer",
							"sid": 855938989431766,
							"parameters": {
								"tag": "\"inputBits\"",
								"value": "PlayerController.inputBits"
							}
						}
					],
					"sid": 833777305179666
				}
			],
			"sid": 314405887567385
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Host",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-peer-connected",
							"objectClass": "Multiplayer",
							"sid": 789747002971039
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 869893985531469,
							"parameters": {
								"object-to-create": "PlayerController",
								"layer": "0",
								"x": "500",
								"y": "500",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerController",
							"sid": 439405318780456,
							"parameters": {
								"instance-variable": "peerId",
								"value": "Multiplayer.PeerID"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 175654393913664,
							"parameters": {
								"object-to-create": "PlayerShip",
								"layer": "0",
								"x": "500",
								"y": "500",
								"create-hierarchy": false,
								"template-name": "\"Falcon\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerController",
							"sid": 846256656148317,
							"parameters": {
								"instance-variable": "uidControlledShip",
								"value": "PlayerShip.UID"
							}
						},
						{
							"callFunction": "AddDebugMessage",
							"sid": 843606576314077,
							"parameters": [
								"\"Peer controlled ship UID: \" & PlayerController.uidControlledShip"
							]
						}
					],
					"sid": 555412073839930
				}
			],
			"sid": 511287576818926
		}
	],
	"sid": 526462627559355
}