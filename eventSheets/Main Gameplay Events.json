{
	"name": "Main Gameplay Events",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Controller Input Events"
		},
		{
			"eventType": "include",
			"includeSheet": "Multiplayer Startup Events"
		},
		{
			"eventType": "include",
			"includeSheet": "Debug Events"
		},
		{
			"eventType": "comment",
			"text": "Set peer inputBits to last received multiplayer input state."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-host",
					"objectClass": "Multiplayer",
					"sid": 918803873606444
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "PlayerShip",
					"sid": 130908806121349,
					"parameters": {
						"instance-variable": "peerId",
						"comparison": 1,
						"value": "Multiplayer.MyID"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "PlayerShip",
					"sid": 855729286656646,
					"parameters": {
						"instance-variable": "inputBits",
						"value": "Multiplayer.PeerState(PlayerShip.peerId, \"inputBits\")"
					}
				}
			],
			"sid": 632698435670119
		},
		{
			"eventType": "comment",
			"text": "Directional movement (single-player or host)."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 392271507848448,
					"parameters": {
						"object": "PlayerShip"
					}
				}
			],
			"actions": [],
			"sid": 345541816248350,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 254973518285440,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 0)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 731900522184085,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "up"
							}
						}
					],
					"sid": 640490548564690
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 845674094772772,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 1)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 229997722971252,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "down"
							}
						}
					],
					"sid": 693424370316644
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 674633695561210,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 2)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 326943878116624,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "left"
							}
						}
					],
					"sid": 826098793866236
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 348981677594315,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 3)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 121655170444608,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "right"
							}
						}
					],
					"sid": 962901621198810
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Shoot standard bullets."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-logged-in",
					"objectClass": "Multiplayer",
					"sid": 153008707026750,
					"isInverted": true
				},
				{
					"id": "is-host",
					"objectClass": "Multiplayer",
					"sid": 568685268012558
				}
			],
			"actions": [
				{
					"id": "subtract-from-instvar",
					"objectClass": "PlayerShip",
					"sid": 960575002732562,
					"parameters": {
						"instance-variable": "shotTimer",
						"value": "dt"
					}
				}
			],
			"sid": 270026180285775,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 356872015476483,
							"parameters": {
								"object": "PlayerShip"
							}
						},
						{
							"id": "while",
							"objectClass": "System",
							"sid": 977624819096084
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PlayerShip",
							"sid": 891946977529542,
							"parameters": {
								"instance-variable": "shotTimer",
								"comparison": 3,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"customAction": "Shoot",
							"objectClass": "PlayerShip",
							"sid": 526900103285449
						}
					],
					"sid": 927310278822237
				}
			],
			"isOrBlock": true
		},
		{
			"aceType": "action",
			"aceName": "Shoot",
			"objectClass": "PlayerShip",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"id": "add-to-instvar",
					"objectClass": "PlayerShip",
					"sid": 899003951190074,
					"parameters": {
						"instance-variable": "shotTimer",
						"value": "Self.shotCooldown"
					}
				}
			],
			"sid": 269939029179755,
			"children": [
				{
					"eventType": "comment",
					"text": "The offsets are applied to bullet spawn parameters to create a fan effect, based on the ship's shots per burst and spread attributes."
				},
				{
					"eventType": "variable",
					"name": "xOffset",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 796951713964139
				},
				{
					"eventType": "variable",
					"name": "yOffset",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 496715666846810
				},
				{
					"eventType": "variable",
					"name": "angleOffset",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 871720135006195
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "repeat",
							"objectClass": "System",
							"sid": 882632740256133,
							"parameters": {
								"count": "PlayerShip.shotsPerBurst"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 433724407720540,
							"parameters": {
								"variable": "xOffset",
								"value": "(loopindex - ((PlayerShip.shotsPerBurst - 1) / 2)) * 10"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 201372865667818,
							"parameters": {
								"variable": "yOffset",
								"value": "abs((loopindex - ((PlayerShip.shotsPerBurst - 1) / 2))) * 5"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 546474702606349,
							"parameters": {
								"variable": "angleOffset",
								"value": "(loopindex - ((PlayerShip.shotsPerBurst - 1) / 2)) * ( PlayerShip.shotSpread / 2)"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 155758527015027,
							"parameters": {
								"object-to-create": "PlayerStandardBullet",
								"layer": "0",
								"x": "PlayerShip.X + xOffset",
								"y": "PlayerShip.Y + yOffset",
								"create-hierarchy": false,
								"template-name": "\"Standard\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "PlayerStandardBullet",
							"sid": 659880777259006,
							"parameters": {
								"angle": "270 + angleOffset"
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "PlayerStandardBullet",
							"sid": 347487588845940,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "270 + angleOffset"
							}
						}
					],
					"sid": 750199069177633
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 662461991020749
				}
			],
			"actions": [
				{
					"id": "set-boolean-instvar",
					"objectClass": "PlayerShip",
					"sid": 681848872025244,
					"parameters": {
						"instance-variable": "shotActive",
						"value": "true"
					}
				}
			],
			"sid": 523025482574980
		}
	],
	"sid": 111151355255525
}