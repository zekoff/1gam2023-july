{
	"name": "Main Gameplay Events",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Controller Input Events"
		},
		{
			"eventType": "include",
			"includeSheet": "Multiplayer Startup Events"
		},
		{
			"eventType": "include",
			"includeSheet": "Debug Events"
		},
		{
			"eventType": "comment",
			"text": "Directional movement (single-player or host)."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 392271507848448,
					"parameters": {
						"object": "PlayerShip"
					}
				}
			],
			"actions": [],
			"sid": 345541816248350,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 254973518285440,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 0)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 731900522184085,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "up"
							}
						}
					],
					"sid": 640490548564690
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 845674094772772,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 1)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 229997722971252,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "down"
							}
						}
					],
					"sid": 693424370316644
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 674633695561210,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 2)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 326943878116624,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "left"
							}
						}
					],
					"sid": 826098793866236
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 348981677594315,
							"parameters": {
								"value": "getbit(PlayerShip.inputBits, 3)"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "PlayerShip",
							"sid": 121655170444608,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "right"
							}
						}
					],
					"sid": 962901621198810
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "Shoot",
			"objectClass": "PlayerShip",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"id": "add-to-instvar",
					"objectClass": "PlayerShip",
					"sid": 899003951190074,
					"parameters": {
						"instance-variable": "shotTimer",
						"value": "Self.shotCooldown"
					}
				}
			],
			"sid": 269939029179755,
			"children": [
				{
					"eventType": "comment",
					"text": "The offsets are applied to bullet spawn parameters to create a fan effect, based on the ship's shots per burst and spread attributes."
				},
				{
					"eventType": "variable",
					"name": "xOffset",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 796951713964139
				},
				{
					"eventType": "variable",
					"name": "yOffset",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 496715666846810
				},
				{
					"eventType": "variable",
					"name": "angleOffset",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 871720135006195
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "repeat",
							"objectClass": "System",
							"sid": 882632740256133,
							"parameters": {
								"count": "PlayerShip.shotsPerBurst"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 433724407720540,
							"parameters": {
								"variable": "xOffset",
								"value": "(loopindex - ((PlayerShip.shotsPerBurst - 1) / 2)) * 10"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 201372865667818,
							"parameters": {
								"variable": "yOffset",
								"value": "abs((loopindex - ((PlayerShip.shotsPerBurst - 1) / 2))) * 5"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 546474702606349,
							"parameters": {
								"variable": "angleOffset",
								"value": "(loopindex - ((PlayerShip.shotsPerBurst - 1) / 2)) * ( PlayerShip.shotSpread / 2)"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 155758527015027,
							"parameters": {
								"object-to-create": "PlayerStandardBullet",
								"layer": "0",
								"x": "PlayerShip.X + xOffset",
								"y": "PlayerShip.Y + yOffset",
								"create-hierarchy": false,
								"template-name": "\"Standard\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "PlayerStandardBullet",
							"sid": 659880777259006,
							"parameters": {
								"angle": "270 + angleOffset"
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "PlayerStandardBullet",
							"sid": 347487588845940,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "270 + angleOffset"
							}
						}
					],
					"sid": 750199069177633
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 662461991020749
				}
			],
			"actions": [
				{
					"id": "set-boolean-instvar",
					"objectClass": "PlayerShip",
					"sid": 681848872025244,
					"parameters": {
						"instance-variable": "shotActive",
						"value": "true"
					}
				}
			],
			"sid": 523025482574980
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Simulation Host",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 611651976099312,
							"parameters": {
								"interval-seconds": "0.5"
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 755777362172705,
							"parameters": {
								"object": "EnemyShip"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 363397206490073,
							"parameters": {
								"object-to-create": "EnemyStandardBullet",
								"layer": "0",
								"x": "EnemyShip.X",
								"y": "EnemyShip.Y",
								"create-hierarchy": false,
								"template-name": "\"Standard\""
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "EnemyStandardBullet",
							"sid": 567975570746800,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "90"
							}
						}
					],
					"sid": 509081672352523
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 327744595866648,
							"parameters": {
								"interval-seconds": "1.0"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 471384966880567,
							"parameters": {
								"object-to-create": "EnemyShip",
								"layer": "0",
								"x": "random(100, 800)",
								"y": "random(0, 300)",
								"create-hierarchy": false,
								"template-name": "\"Standard\""
							}
						},
						{
							"callFunction": "AddDebugMessage",
							"sid": 754545579968282,
							"parameters": [
								"\"Spawning ship\""
							]
						}
					],
					"sid": 327530931374471
				},
				{
					"eventType": "comment",
					"text": "Set peer inputBits to last received multiplayer input state."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-host",
							"objectClass": "Multiplayer",
							"sid": 297376582983905,
							"disabled": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PlayerShip",
							"sid": 309694650905239,
							"parameters": {
								"instance-variable": "peerId",
								"comparison": 1,
								"value": "Multiplayer.MyID"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerShip",
							"sid": 741355154182269,
							"parameters": {
								"instance-variable": "inputBits",
								"value": "Multiplayer.PeerState(PlayerShip.peerId, \"inputBits\")"
							}
						}
					],
					"sid": 735762155263151
				},
				{
					"eventType": "comment",
					"text": "Shoot standard bullets."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 636177978366135
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "PlayerShip",
							"sid": 981999105324622,
							"parameters": {
								"instance-variable": "shotTimer",
								"value": "dt"
							}
						}
					],
					"sid": 511297093353774,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 870646391307519,
									"parameters": {
										"object": "PlayerShip"
									}
								},
								{
									"id": "while",
									"objectClass": "System",
									"sid": 872755436944797
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayerShip",
									"sid": 555464840665369,
									"parameters": {
										"instance-variable": "shotTimer",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"customAction": "Shoot",
									"objectClass": "PlayerShip",
									"sid": 382631417358862
								}
							],
							"sid": 821396757646658
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerProjectiles",
							"sid": 411871997771452,
							"parameters": {
								"object": "EnemyCollisionBodies"
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "EnemyCollisionBodies",
							"sid": 324383241081105,
							"parameters": {
								"instance-variable": "health",
								"value": "PlayerProjectiles.power"
							}
						},
						{
							"id": "destroy",
							"objectClass": "PlayerProjectiles",
							"sid": 223521412320866
						}
					],
					"sid": 742085949515897
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "EnemyShip",
							"sid": 859999691343304,
							"parameters": {
								"instance-variable": "health",
								"comparison": 3,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "EnemyShip",
							"sid": 828494361608848
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 949175626974572,
							"parameters": {
								"object-to-create": "ExplosionParticle",
								"layer": "0",
								"x": "EnemyShip.X",
								"y": "EnemyShip.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 409899984710129
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "EnemyProjectiles",
							"sid": 238511654295518,
							"parameters": {
								"object": "PlayerCollisionBodies"
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "PlayerCollisionBodies",
							"sid": 340052109277339,
							"parameters": {
								"instance-variable": "health",
								"value": "1"
							}
						}
					],
					"sid": 530576396814927
				}
			],
			"sid": 165087011474544
		}
	],
	"sid": 111151355255525
}